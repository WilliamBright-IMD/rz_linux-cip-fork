# SPDX-License-Identifier: (GPL-2.0-only OR BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/net/renesas,rzt2h-ethss.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Renesas RZ/T2H Ethernet Subsystem

description: |
  This Ethernet Subsystem is present on the Renesas RZ/T2H SoC family. It is
  responsible to do MII passthrough or convert it to RMII/RGMII.

properties:
  '#address-cells':
    const: 1

  '#size-cells':
    const: 0

  compatible:
    items:
      - const: renesas,rzt2h-ethss

  reg:
    maxItems: 1

  clocks:
    items:
      - description: Clock used for the MII converter register interface

  renesas,ethss-switch-portmanagement:
    description: ETHSS Switch Management port configuration. This value should use one of
      the values defined in dt-bindings/net/rzt2h-ethss.h.
    $ref: /schemas/types.yaml#/definitions/uint32

  power-domains:
    maxItems: 1

patternProperties:
  "^mii-conv@[0-5]$":
    type: object
    description: MII converter port

    properties:
      reg:
        description: MII Converter port number.
        enum: [0, 1, 2, 3]

      renesas,ethss-port:
        description: Converter input port configuration. This value should use
          one of the values defined in dt-bindings/net/rzt2h-ethss.h.
        $ref: /schemas/types.yaml#/definitions/uint32

    required:
      - reg
      - renesas,ethss-port

    additionalProperties: false

required:
  - '#address-cells'
  - '#size-cells'
  - compatible
  - reg
  - clocks
  - power-domains

additionalProperties: false

examples:
  - |
    #include <dt-bindings/net/rzt2h-ethss.h>

	ethss: ethss@80110000 {
	        compatible = "renesas,rzt2h-ethss";
	        #address-cells = <1>;
	        #size-cells = <0>;
	        reg =  <0 0x80110000 0 0x10000>;
	        clocks = <&cpg CPG_MOD R9A09G077_ETHSS_CLK>;
	        resets = <&cpg R9A09G077_ETH_SUBSYSTEM_RST>,
	                 <&cpg R9A09G077_MII_CONVERT_RST>;
	        reset-names = "reset_ethss", "reset_conv";
	        power-domains = <&cpg>;
	        status = "disabled";

	        mii_conv0: mii-conv@0 {
	                reg = <0>;
	                status = "disabled";
	        };

	        mii_conv1: mii-conv@1 {
	                reg = <1>;
	                status = "disabled";
	        };

	        mii_conv2: mii-conv@2 {
	                reg = <2>;
	                status = "disabled";
	        };

	        mii_conv3: mii-conv@3 {
	                reg = <3>;
	                status = "disabled";
	        };
	};
